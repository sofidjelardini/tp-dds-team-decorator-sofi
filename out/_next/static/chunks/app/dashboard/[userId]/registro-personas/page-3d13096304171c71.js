(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[861],{6647:function(e,a,t){Promise.resolve().then(t.bind(t,6612)),Promise.resolve().then(t.bind(t,1566))},6612:function(e,a,t){"use strict";t.d(a,{default:function(){return c}});var s=t(7437),r=t(2265),i=JSON.parse('[{"nombre":"Franco Colapinto","fechaNacimiento":"1995-10-03","situacion":"calle","direccion":"","tipoDoc":"DNI","numDoc":"3939292929","tieneMenores":false,"cantMenores":0,"colaborador":"23232424","fechaRegistro":"2025-01-15T14:10:40.101Z"},{"nombre":"Sof\xeda","fechaNacimiento":"1999-06-22","situacion":"calle","direccion":"","tipoDoc":"DNI","numDoc":"3292801213","tieneMenores":false,"cantMenores":0,"colaborador":"41917951","fechaRegistro":"2025-01-15T15:54:14.230Z","tarjetaAsignada":"G6H7I8J9K0L"},{"nombre":"Juan Pedro Suarez","fechaNacimiento":"1976-05-23","situacion":"calle","direccion":"","tipoDoc":"DNI","numDoc":"230295820","tieneMenores":false,"cantMenores":0,"colaborador":"41917951","fechaRegistro":"2025-01-20T17:01:19.669Z","tarjetaAsignada":"M1N2O3P4Q5R"},{"nombre":"Juan Pedrito","fechaNacimiento":"2025-01-20","situacion":"calle","direccion":"","tipoDoc":"DNI","numDoc":"99999999","tieneMenores":false,"cantMenores":0,"colaborador":"41917951","fechaRegistro":"2025-01-20T17:02:19.111Z","tarjetaAsignada":"M1N2O3P4Q5R"}]'),o=t(7349),n=t(9733),l=t(9628),c=()=>{let[e,a]=(0,r.useState)(""),[t,c]=(0,r.useState)(""),[d,m]=(0,r.useState)("calle"),[u,h]=(0,r.useState)(""),[f,b]=(0,r.useState)("DNI"),[p,x]=(0,r.useState)(""),[j,g]=(0,r.useState)(!1),[N,v]=(0,r.useState)(""),[y,w]=(0,r.useState)(""),[D,S]=(0,r.useState)(),[k,T]=(0,r.useState)(!1),[C,E]=(0,r.useState)(!1),[P,M]=(0,r.useState)(!1),[R,A]=(0,r.useState)(),[I,J]=(0,r.useState)(),[O,F]=(0,r.useState)();(0,r.useEffect)(()=>{S(localStorage.getItem("userId"))},[]),(0,r.useEffect)(()=>{q()},[D]),(0,r.useEffect)(()=>{F(o.x.filter(e=>e.colaboradorId===D&&!1===e.tarjetaAsignadaAPersonaVulnerable))},[D]),(0,r.useEffect)(()=>{if(k){let e=setTimeout(()=>{T(!1)},3e3);return()=>clearTimeout(e)}if(C){let e=setTimeout(()=>{E(!1)},3e3);return()=>clearTimeout(e)}},[k,C]);let q=()=>{J(i.filter(e=>e.colaborador===D))},L=async s=>{s.preventDefault();let r=O[0];r.tarjetaAsignadaAPersonaVulnerable=!0,r.usuario=p;let i={nombre:e,fechaNacimiento:t,situacion:d,direccion:"domicilio"===d?u:"",tipoDoc:f,numDoc:p,tieneMenores:!!j,cantMenores:j?Number(N):0,colaborador:D,fechaRegistro:new Date().toISOString(),tarjetaAsignada:r.numeroTarjeta};try{let e=await fetch("/api/personas-vulnerables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});await fetch("/api/tarjetas",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({tarjetasDisponibles:o.a,tarjetasAsignadas:[...o.x,r]})});let t=await e.json();e.ok?(T(!0),q(),a(""),c(""),m("calle"),h(""),b("DNI"),x(""),g(!1),v(""),await $()):w(t.mensaje||"Error al registrar la persona")}catch(e){console.error("Error al registrar la persona:",e),w("Error al registrar la persona")}},$=async()=>{let e=l.find(e=>e.documento===D),a={tarjetasRepartidas:((null==e?void 0:e.tarjetasRepartidas)||0)+1};await fetch("/api/editar-perfil",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,userId:D})})},_=async e=>{try{if(!(await fetch("/api/personas-vulnerables",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({documentoPersonaVulnerable:e})})).ok)throw Error("Error al dar de baja persona");q(),E(!0)}catch(e){console.error("Error en el env\xedo:",e)}};return(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center mt-6",children:[(0,s.jsx)("div",{className:"w-3/4 justify-center bg-white shadow-lg rounded-lg p-6",children:(0,s.jsxs)("form",{onSubmit:L,className:"flex flex-col gap-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Registrar Persona Vulnerable"}),y&&(0,s.jsx)("div",{className:"text-green-600",children:y}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"nombre",className:"block text-sm font-medium",children:"Nombre:"}),(0,s.jsx)("input",{type:"text",id:"nombre",className:"mt-1 p-2 border rounded-md w-full",value:e,onChange:e=>a(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"fechaNacimiento",className:"block text-sm font-medium",children:"Fecha de Nacimiento:"}),(0,s.jsx)("input",{type:"date",id:"fechaNacimiento",className:"mt-1 p-2 border rounded-md w-full",value:t,onChange:e=>c(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Situaci\xf3n:"}),(0,s.jsxs)("select",{value:d,onChange:e=>m(e.target.value),className:"mt-1 p-2 border rounded-md w-full",children:[(0,s.jsx)("option",{value:"calle",children:"Calle"}),(0,s.jsx)("option",{value:"domicilio",children:"Domicilio"})]})]}),"domicilio"===d&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"direccion",className:"block text-sm font-medium",children:"Direcci\xf3n:"}),(0,s.jsx)("input",{type:"text",id:"direccion",className:"mt-1 p-2 border rounded-md w-full",value:u,onChange:e=>h(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"tipoDoc",className:"block text-sm font-medium",children:"Tipo de Documento:"}),(0,s.jsx)("input",{type:"text",id:"tipoDoc",className:"mt-1 p-2 border rounded-md w-full",value:f,required:!0,disabled:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"numDoc",className:"block text-sm font-medium",children:"N\xfamero de Documento:"}),(0,s.jsx)("input",{type:"text",id:"numDoc",className:"mt-1 p-2 border rounded-md w-full",value:p,onChange:e=>x(e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"tieneMenores",checked:j,onChange:e=>g(e.target.checked)}),(0,s.jsx)("label",{htmlFor:"tieneMenores",className:"ml-2",children:"Tiene menores a cargo"})]}),j&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"cantMenores",className:"block text-sm font-medium",children:"Cantidad de Menores a Cargo:"}),(0,s.jsx)("input",{type:"number",id:"cantMenores",className:"mt-1 p-2 border rounded-md w-full",value:N,onChange:e=>v(e.target.value),required:!0})]}),(0,s.jsx)("button",{className:"mt-4 bg-blue-600 text-white py-2 rounded-md hover:bg-blue-500 transition",type:"submit",children:"Registrar Persona"})]})}),(0,s.jsxs)("section",{className:"technicians-list w-full",children:[(0,s.jsx)("h2",{className:"mt-7 text-lg font-semibold",children:"Personas Registradas por usted :)"}),(0,s.jsx)("ul",{className:"list-disc pl-5",children:(null==I?void 0:I.length)>0?(0,s.jsx)("ul",{children:I.map(e=>(0,s.jsxs)("li",{className:"flex justify-between items-center mb-2",children:[null==e?void 0:e.nombre,(0,s.jsxs)("p",{children:[(0,s.jsx)("b",{children:"Tarjeta Asignada: "}),e.tarjetaAsignada]}),(0,s.jsx)("div",{className:"flex space-x-2",children:(0,s.jsx)(n.z,{onClick:()=>{A(e.numDoc),M(!0)},className:"w-auto bg-yellow-500 hover:bg-yellow-400",children:"Dar de Baja"})})]},e.documento))}):(0,s.jsx)("p",{children:"No registraste a nadie"})})]}),k&&(0,s.jsx)("div",{className:"fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,s.jsxs)("div",{className:"bg-white p-4 rounded-md shadow-md",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"\xa1Persona Registrada!"}),(0,s.jsx)("p",{children:"Gracias! La informaci\xf3n se ha guardado exitosamente."})]})}),C&&(0,s.jsx)("div",{className:"fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,s.jsxs)("div",{className:"bg-white p-4 rounded-md shadow-md",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"\xa1Persona Eliminada!"}),(0,s.jsx)("p",{children:"Gracias! La informaci\xf3n se ha guardado exitosamente."})]})}),P&&(0,s.jsx)("div",{className:"fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,s.jsxs)("div",{className:"bg-white p-4 rounded-md shadow-md",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"\xbfEst\xe1s seguro que deseas eliminar a esta persona en situaci\xf3n vulnerable?"}),(0,s.jsx)("p",{className:"mb-5 mt-2 flex items-center justify-center",children:"Si la eliminas, luego tendr\xe1s que cargarla nuevamente."}),(0,s.jsxs)("div",{className:"flex items-center justify-evenly ",children:[(0,s.jsx)(n.z,{onClick:()=>{_(R),M(!1)},className:"w-auto bg-yellow-500 hover:bg-yellow-400",children:"Dar de Baja"}),(0,s.jsx)(n.z,{onClick:()=>{A(void 0),M(!1)},className:"w-auto bg-red-500 hover:bg-red-400",children:"Cancelar"})]})]})})]})}},9628:function(e){"use strict";e.exports=JSON.parse('[{"documento":"41917951","password":"$2b$10$UmNwDnUbv.uaoCZnEpvFq.j6Rpn8nK1IjNc48y.TsWMi6rEvYpvXK","personaJuridica":false,"ayudarPersonas":true,"nombre":"Sofia","apellido":"Djelardini","email":"sdjelardini@gmail.com","telefono":"01144051200","fechaNacimiento":"1999-06-22","direccion":"0 Barrio Septiembre","codigoPostal":"1625","pesosDonados":1000,"viandasDonadas":2,"viandasDistribuidas":1,"tarjetasRepartidas":15},{"documento":"12345678","password":"$2b$10$8SPVDWn2JFtHNrLnDyP7Q.0c.AaehogXLRIYTMRp.ylDTruWXAklG","personaJuridica":true,"ayudarPersonas":false,"razonSocial":"niidea123","telefono":"01144051200","tipo":"Empresa","rubro":"restaurant","direccion":"0 Barrio Septiembre"}]')}},function(e){e.O(0,[310,927,704,177,971,23,744],function(){return e(e.s=6647)}),_N_E=e.O()}]);