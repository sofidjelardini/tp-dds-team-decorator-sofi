(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[771],{9792:function(e,o,a){Promise.resolve().then(a.bind(a,9021)),Promise.resolve().then(a.bind(a,1566))},9021:function(e,o,a){"use strict";a.d(o,{default:function(){return l}});var r=a(7437),t=a(2265),n=a(8355),c=a.n(n),l=()=>{let[e,o]=(0,t.useState)(null),[a,n]=(0,t.useState)([]),[l,i]=(0,t.useState)(null);return(0,r.jsxs)("form",{onSubmit:o=>{if(o.preventDefault(),!e){alert("Por favor, selecciona un archivo CSV.");return}let a=new FileReader;a.onload=async e=>{var o;let a=null===(o=e.target)||void 0===o?void 0:o.result;c().parse(a,{header:!0,complete:async e=>{let o=e.data.map(e=>({tipoDoc:e.TipoDoc?e.TipoDoc.trim():"",documento:e.Documento?e.Documento.trim():"",nombre:e.Nombre?e.Nombre.trim():"",apellido:e.Apellido?e.Apellido.trim():"",mail:e.Mail?e.Mail.trim():"",fechaColaboracion:e.FechaColaboracion?e.FechaColaboracion.trim():"",formaColaboracion:e.FormaColaboracion?e.FormaColaboracion.trim():"",cantidad:e.Cantidad?e.Cantidad.trim():""})).filter(e=>e.tipoDoc&&e.documento),a=function(e){let o=[],a=["LC","LE","DNI"],r=["DINERO","DONACION_VIANDAS5","REDISTRIBUCION_VIANDAS","ENTREGA_TARJETAS"];return e.forEach((e,t)=>{let{tipoDoc:n,documento:c,nombre:l,apellido:i,mail:s,fechaColaboracion:d,formaColaboracion:m,cantidad:u}=e;a.includes(n)||o.push("Error en la colaboraci\xf3n ".concat(t+1,": Tipo de documento inv\xe1lido '").concat(n,"'. Debe ser uno de ").concat(a.join(", "),".")),/^\d{10}$/.test(c)||o.push("Error en la colaboraci\xf3n ".concat(t+1,": Documento '").concat(c,"' debe ser num\xe9rico y tener 10 d\xedgitos.")),("string"!=typeof l||l.length>50)&&o.push("Error en la colaboraci\xf3n ".concat(t+1,": Nombre '").concat(l,"' debe ser texto y no exceder los 50 caracteres.")),("string"!=typeof i||i.length>50)&&o.push("Error en la colaboraci\xf3n ".concat(t+1,": Apellido '").concat(i,"' debe ser texto y no exceder los 50 caracteres.")),(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)||s.length>50)&&o.push("Error en la colaboraci\xf3n ".concat(t+1,": Mail '").concat(s,"' debe tener formato v\xe1lido y no exceder los 50 caracteres.")),/^\d{2}\/\d{2}\/\d{4}$/.test(d)||o.push("Error en la colaboraci\xf3n ".concat(t+1,": Fecha de colaboraci\xf3n '").concat(d,"' debe estar en formato dd/mm/aaaa.")),r.includes(m)||o.push("Error en la colaboraci\xf3n ".concat(t+1,": Forma de colaboraci\xf3n '").concat(m,"' inv\xe1lida. Debe ser uno de ").concat(r.join(", "),".")),/^\d{1,7}$/.test(u)||o.push("Error en la colaboraci\xf3n ".concat(t+1,": Cantidad '").concat(u,"' debe ser num\xe9rica y tener hasta 7 d\xedgitos."))}),o}(o);if(a.length>0)n(a),i(null);else{let e=await fetch("/api/colaboraciones",{method:"POST",body:JSON.stringify(o)}),a=await e.json();e.ok?(i(a.mensaje),n([])):(n(a.errores),i(null))}},error:e=>{console.error("Error al analizar el archivo CSV:",e),n(["Error al analizar el archivo CSV."])}})},a.readAsText(e)},className:"flex flex-col gap-4",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Cargar Colaboraciones"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"archivo",className:"block text-sm font-medium",children:"Seleccionar archivo CSV:"}),(0,r.jsx)("input",{type:"file",id:"archivo",accept:".csv",onChange:e=>{e.target.files&&o(e.target.files[0])},required:!0,className:"mt-1 p-2 border rounded-md w-full"})]}),a&&a.length>0&&(0,r.jsxs)("div",{className:"text-red-600",children:[(0,r.jsx)("h3",{children:"Errores:"}),(0,r.jsx)("ul",{children:a.map((e,o)=>(0,r.jsx)("li",{children:e},o))})]}),l&&(0,r.jsx)("h3",{className:"text-green-600",children:l}),(0,r.jsx)("button",{type:"submit",className:"mt-4 bg-primary text-white py-2 rounded-md hover:bg-primary-dark",children:"Cargar"})]})}}},function(e){e.O(0,[310,927,704,365,971,23,744],function(){return e(e.s=9792)}),_N_E=e.O()}]);